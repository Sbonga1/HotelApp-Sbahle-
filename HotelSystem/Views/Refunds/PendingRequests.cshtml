@model IEnumerable<HotelSystem.Models.Refund>
@{
    ViewBag.Title = "PendingRequests";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Cabin:600,700|Lato:300,400" rel="stylesheet">
    <script src="https://use.fontawesome.com/086e19824e.js"></script>
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/Site.css")
    @Scripts.Render("~/bundles/modernizr")
    <style>
        .room-name {
            font-size: 18px;
            color: blue;
            text-align: center;
        }

        .btn-success {
            width: 100%;
        }
    </style>
</head>
<body>
    <section id="my-reservations">
        <div class="container">

            <div class="row">

                <div class="big-title text-center">
                    <h1>REFUND REQUESTS</h1>
                    <div class="line"></div>
                </div>

            </div>

            <div class="row">

                @foreach (var item in Model)
                {

                    <div class="reservation-box">

                        @*<div class="col-sm-4 img-cont">
                                <p class="room-name">@Html.DisplayFor(modelItem => item.RoomType)</p>
                                <img src="~/Content/img/delivered.jpg" alt="" class="">

                            </div>*@

                        <div class="col-sm-3 main-details">

                            <div class="item">
                                <h5><strong>Customer Email:</strong></h5>
                                <p>@Html.DisplayFor(modelItem => item.emailaddress)</p>
                            </div>

                            <div class="item">
                                <h5><strong>Reservation Number:</strong> </h5>
                                <p>@Html.DisplayFor(modelItem => item.ReservationId)</p>
                            </div>

                            <div class="item">
                                <h5><strong>Reservation Date:</strong></h5>
                                <p>@Html.DisplayFor(modelItem => item.ResevationDate)</p>
                            </div>


                        </div>

                        <div class="col-sm-3 main-details">
                            <div class="item">
                                <h5><strong>Refund Date:</strong></h5>
                                <p>@Html.DisplayFor(modelItem => item.RefundDate)</p>
                            </div>
                            <div class="item">
                                <h5><strong>Status:</strong></h5>
                                <p>@Html.DisplayFor(modelItem => item.RefundStatus)</p>
                            </div>

                            <div class="item">
                                <h5><strong>Reason:</strong></h5>
                                <p>@Html.DisplayFor(modelItem => item.Reason)</p>
                            </div>
                        </div>

                        <div class="col-sm-3 main-details">
                            <div class="item">
                                <h5><strong>Amount Paid:</strong></h5>
                                <p><span>R</span>@Html.DisplayFor(modelItem => item.reservationAmtPaid)</p>
                            </div>

                            <div class="item">
                                <h5><strong>Deductions:</strong></h5>
                                <p><span>R</span>@Html.DisplayFor(modelItem => item.RefundFee)</p>
                            </div>
                            <div class="item">
                                <h5><strong>Refund Amount:</strong></h5>
                                <p><span>R</span>@Html.DisplayFor(modelItem => item.tobePaid)</p>
                            </div>
                        </div>


                        <div class="col-sm-2 action-btns">
                            @if (item.RefundStatus == "Awaiting Approval")
                            {
                                <button type="button" class="btn btn-success" id="Reserv" onclick="location.href='@Url.Action(actionName: "OnceOff", controllerName: "Payment", routeValues: new { TotalPrice = item.tobePaid,email = item.emailaddress })'"><i class="fa fa-lock"></i> Pay Now</button>
                                <br /><br />
                                @Html.ActionLink("Decline", "DeclineView", new { id = item.RefundId }, new { @class = "btn btn-danger" })
                            }
                            else
                            {
                                @*@Html.ActionLink("Delete", "Delete", new { id = item.RefundId }, new { @class = "btn btn-danger" })*@
                            }
                            @*@Html.ActionLink("Approve", "Approve", new { id = item.RefundId }, new { @class = "btn btn-primary" })*@


                            <br />
                            <a class="link" href="@Url.Content($"~/{item.emailaddress}.pdf")"><i class="fa fa-download"></i>&ensp; Reciept</a>

                            <br />

                        </div>

                    </div>

                    <div class="clearfix"></div>

                }


            </div>
        </div>
    </section>
    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
</body>
</html>

